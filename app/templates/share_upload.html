{% extends "base.html" %}
{% block title %}Upload Shared Data | VibeShare{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-6 py-12">
  <h1 class="text-2xl font-bold text-indigo-700 mb-4">Upload Shared Data</h1>

  <form method="POST" enctype="multipart/form-data" class="mb-10 bg-white p-6 rounded-xl shadow">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <label class="block mb-2 text-sm font-medium text-gray-700">Choose a CSV or JSON file:</label>
    <input type="file" name="file" class="mb-4 block w-full text-sm text-gray-500">
    <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition">Upload</button>
  </form>

  <h2 class="text-xl font-semibold text-gray-800 mb-4">Your Uploaded Files</h2>
  <ul class="space-y-3">
    {% for item in shared_data %}
    <li class="p-4 bg-gray-50 border rounded-lg shadow-sm flex justify-between items-center">
      <div>
        <p class="font-medium text-gray-900">{{ item.file_name }}</p>
        <p class="text-xs text-gray-500">{{ item.timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
      </div>
      <form method="POST" action="{{ url_for('share.delete_shared_data', data_id=item.id) }}">
        <button class="text-red-500 hover:text-red-700 text-sm" onclick="return confirm('Are you sure?')">Delete</button>
      </form>
    </li>
    {% else %}
    <p class="text-sm text-gray-500">No files uploaded yet.</p>
    {% endfor %}
  </ul>
</div>
{% endblock %}
