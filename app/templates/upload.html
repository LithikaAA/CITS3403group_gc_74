{% extends "base.html" %}
{% block title %}Upload Dashboard | VibeShare{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/upload.css') }}">
{% endblock %}

{% block content %}
<div class="w-full max-w-7xl mx-auto px-8 py-8">
  <!-- Greeting -->
  <div class="lg:flex justify-between items-center mb-6 mt-10">
    <h1 class="text-5xl font-extrabold text-black drop-shadow-sm tracking-tight">
      Welcome back, {{ username }}!
    </h1>
  </div>

  <!-- Banner -->
  <div class="relative rounded-xl overflow-hidden mb-10 h-72 bg-gradient-to-r from-purple-500 via-pink-400 to-blue-400 flex items-center justify-center">
    <div class="text-white text-center">
      <h1 class="typewriter text-4xl sm:text-5xl font-extrabold tracking-wide"></h1>
    </div>
  </div>

  <!-- Visualisation Requirement Notice -->
  <div class="bg-white rounded-xl shadow p-4 mb-6 text-center border border-yellow-300">
    <p class="text-yellow-700 font-medium">
      <svg xmlns="http://www.w3.org/2000/svg" class="inline h-5 w-5 mr-2 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01M4.293 17.293a1 1 0 010-1.414L11.586 8.586a2 2 0 012.828 0l7.293 7.293a1 1 0 01-1.414 1.414L13 10.414l-7.293 7.293a1 1 0 01-1.414 0z" />
      </svg>
      To generate your visualisation dashboard, please add at least <strong>10 songs</strong>.
    </p>
  </div>

  <!-- Song Search Panel -->
  <div class="bg-white rounded-xl shadow p-8 mb-10 relative">
    <h2 class="text-2xl font-bold mb-6 text-center">Search for Songs</h2>

    <div class="relative mb-6">
      <input id="search-query" type="text" placeholder="Type a song or artist..."
        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-pink-400 focus:outline-none">
      <div id="searchResults" class="absolute bg-white shadow-lg rounded-lg z-50 w-full mt-1" style="display: none;">
        <ul id="resultsContainer" class="divide-y divide-gray-200"></ul>
      </div>
    </div>

    <!-- Autofill Fields -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <input id="title" type="text" placeholder="Title" class="px-4 py-3 rounded-lg border border-gray-300 bg-white">
      <input id="artist" type="text" placeholder="Artist" class="px-4 py-3 rounded-lg border border-gray-300 bg-white">
      <input id="album" type="text" placeholder="Album" class="px-4 py-3 rounded-lg border border-gray-300 bg-white">
      <input id="genre" type="text" placeholder="Genre" class="px-4 py-3 rounded-lg border border-gray-300 bg-white">
    </div>

    <!-- Song Features (Read-only) -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <input id="danceability" placeholder="Danceability" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="energy" placeholder="Energy" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="liveness" placeholder="Liveness" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="acousticness" placeholder="Acousticness" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="valence" placeholder="Valence" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="mode" placeholder="Mode (Major/Minor)" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="tempo" placeholder="Tempo (BPM)" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
      <input id="duration_ms" placeholder="Duration (ms)" class="px-4 py-3 rounded-lg border border-gray-300 bg-white" readonly>
    </div>

    <button id="add-track-btn" class="w-full py-3 bg-gradient-to-r from-purple-400 to-pink-500 text-white font-semibold rounded-lg hover:brightness-110">
      Add Data
    </button>
  </div>

  <!-- Added Songs Section -->
  <div id="added-songs" class="bg-white rounded-xl shadow p-6 mt-10 hidden">
    <h2 class="text-2xl font-bold mb-4">Your Selected Songs</h2>
    <ul id="song-list" class="space-y-2"></ul>
    <div class="mt-6">
      <input id="playlist-name" type="text" placeholder="Playlist Name (required)" class="w-full mb-4 px-4 py-3 rounded-lg border border-gray-300 bg-white">
      <button id="create-playlist-btn" class="w-full py-3 text-white font-semibold rounded-lg bg-gray-300 cursor-not-allowed" disabled>
        Create Playlist
      </button>
    </div>
  </div>

  <!-- Playlist Created Section -->
  <div id="playlist-output" class="hidden mt-10 bg-white rounded-xl shadow p-6">
    <h2 class="text-2xl font-bold mb-4">Your Playlist</h2>
    <div id="playlist-container" class="space-y-4"></div>
  </div>
</div>


{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}