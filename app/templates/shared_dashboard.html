{% extends "base.html" %}
{% block title %}View Shared Data | VibeShare{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto p-6">
  {% if shared_items %}
    <!-- Header -->
    <h1 class="text-3xl font-bold mb-6 animate-fade-in">
      Shared by: {{ owner.username }}
    </h1>

    <!-- Chart Grid -->
    <div class="grid gap-8 sm:grid-cols-2 xl:grid-cols-3">
      <div class="bg-white p-4 rounded-2xl shadow-lg transition transform hover:scale-105 animate-fade-in">
        <canvas id="sharedMoodRadar" aria-label="Mood Radar Chart"></canvas>
      </div>
      <div class="bg-white p-4 rounded-2xl shadow-lg transition transform hover:scale-105 animate-fade-in">
        <canvas id="sharedTempoBar" aria-label="Tempo Bar Chart"></canvas>
      </div>
      <div class="bg-white p-4 rounded-2xl shadow-lg transition transform hover:scale-105 animate-fade-in">
        <canvas id="sharedGenrePie" aria-label="Genre Pie Chart"></canvas>
      </div>
    </div>
  {% else %}
    <p class="text-center text-gray-500 py-12">
      No playlists have been shared with you yet.
    </p>
  {% endif %}
</div>

{% if shared_items %}
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Pass only when data exists -->
  <script>
    const first = {{ shared_items[0] | tojson }};
    const moodData = { labels: first.labels, values: first.values };
    const tempoData = { labels: first.labels, values: first.values };
    const genreData = { labels: first.labels, values: first.values };
    const themeSeed = "{{ owner.username }}";
  </script>
  <script src="{{ url_for('static', filename='js/view_data.js') }}"></script>
{% endif %}
{% endblock %}
